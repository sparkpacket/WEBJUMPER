<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>WEB JUMPER</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#0a0b1a; --neon:#00ffd5; --accent:#ff4dff; --muted:#9aa0c3;
}
html,body{height:100%;margin:0;background:linear-gradient(180deg,#05050a 0%, #07102a 60%);color:var(--muted);font-family: 'Press Start 2P', monospace;}
.wrap{max-width:1200px;margin:28px auto;padding:18px;}
header{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px}
h1{color:var(--neon);font-size:20px;letter-spacing:2px;margin:0;text-shadow:0 0 8px rgba(0,255,213,0.14)}
.sub{font-size:10px;color:#7c84a7}
.center-controls{display:flex;gap:12px;align-items:center;justify-content:center;margin:18px 0}
.btn{background:transparent;border:2px solid var(--neon);padding:10px 16px;border-radius:8px;color:var(--neon);cursor:pointer;backdrop-filter: blur(2px);}
.btn.secondary{border-color:var(--accent);color:var(--accent)}
.btn:active{transform:translateY(1px)}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:12px}
.card{background:linear-gradient(135deg,rgba(255,255,255,0.02),rgba(0,0,0,0.08));border:1px solid rgba(255,255,255,0.04);padding:12px;border-radius:8px;display:flex;flex-direction:column;align-items:stretch;gap:10px;box-shadow:0 6px 18px rgba(0,0,0,0.6)}
.banner{height:80px;border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:11px;color:#05050a;text-transform:uppercase;font-weight:700;}
.domain{font-size:10px;color:var(--muted);word-break:break-all}
a.card-link{text-decoration:none}
.status{font-size:10px;padding:6px;border-radius:6px;text-align:center}
.ok{background:rgba(0,255,213,0.12);color:var(--neon);border:1px solid rgba(0,255,213,0.08)}
.dead{background:rgba(255,77,255,0.04);color:var(--accent);border:1px solid rgba(255,77,255,0.06)}
.sale{background:rgba(255,255,0,0.1);color:#ffd700;border:1px solid rgba(255,255,0,0.2)}
footer{margin-top:18px;font-size:10px;color:#6f7597;text-align:center}
.stripe-1{background:repeating-linear-gradient(90deg, #ffd8a6 0 8px, transparent 8px 16px), linear-gradient(135deg,#ff9fd6,#7be0ff);}
.stripe-2{background:repeating-linear-gradient(90deg, #b7f7d6 0 8px, transparent 8px 16px), linear-gradient(135deg,#ffd16b,#60d394);}
.stripe-3{background:repeating-linear-gradient(90deg, #c4d6ff 0 8px, transparent 8px 16px), linear-gradient(135deg,#8a7bff,#ff7bd6);}
@media (max-width:600px){h1{font-size:14px} .banner{height:72px}}
</style>
</head>
<body>
<div class="wrap">
<header>
  <div>
    <h1>WEB JUMPER</h1>
    <div class="sub">A retro linkboard â€” click a banner to open a site in a new tab.</div>
  </div>
  <div style="text-align:right">
    <div class="sub">Auto-generates links & checks basic availability</div>
  </div>
</header>

<div class="center-controls">
  <button id="clearBtn" class="btn">CLEAR UNAVAILABLE</button>
  <button id="regenBtn" class="btn secondary">RE-GENERATE NEW SET</button>
  <button id="recheckBtn" class="btn">RE-CHECK AVAILABILITY</button>
</div>

<main>
  <div id="grid" class="grid" aria-live="polite"></div>
</main>

<footer>
Tip: links open in a new tab. Unavailable or on-sale sites are replaced by the "CLEAR UNAVAILABLE" button.
</footer>
</div>

<script>
const tlds = ['com','net','org','io','xyz','dev','site','tech','online','co','us','gg','me','space','world','games','info','club','app','store'];
const grid = document.getElementById('grid');
const clearBtn = document.getElementById('clearBtn');
const regenBtn = document.getElementById('regenBtn');
const recheckBtn = document.getElementById('recheckBtn');

let currentSet = [];

function randomChoice(arr){ return arr[Math.floor(Math.random()*arr.length)]; }
function randInt(min,max){ return Math.floor(Math.random()*(max-min+1))+min }

function makeDomain(){
  const length = randInt(3,10);
  let name = '';
  const letters = 'abcdefghijklmnopqrstuvwxyz';
  for(let i=0;i<length;i++) name += letters[Math.floor(Math.random()*letters.length)];
  if(Math.random() < 0.2) name += String(randInt(2,99));
  return name + '.' + randomChoice(tlds);
}

function generateSet(count=30){
  const set = new Set();
  while(set.size<count) set.add(makeDomain());
  currentSet = Array.from(set);
  return currentSet;
}

function createCard(domain, idx){
  const a = document.createElement('a');
  a.className='card-link';
  const card = document.createElement('div');
  card.className='card';

  const banner = document.createElement('div');
  banner.className='banner ' + (['stripe-1','stripe-2','stripe-3'][idx%3]);
  banner.textContent = domain.split('.')[0].toUpperCase();

  const domainEl = document.createElement('div');
  domainEl.className='domain';
  domainEl.textContent = domain;

  const status = document.createElement('div');
  status.className='status';
  status.textContent='Checking...';

  card.appendChild(banner);
  card.appendChild(domainEl);
  card.appendChild(status);
  a.appendChild(card);

  a.href='https://'+domain;
  a.target='_blank';
  a.rel='noopener noreferrer';

  return {element:a,statusEl:status};
}

function checkAvailabilityAsync(domain){
  return new Promise((resolve)=>{
    const candidates = [`https://${domain}/favicon.ico`,`https://${domain}/favicon.png`,`https://${domain}`];
    let tried=0, succeeded=false;

    function tryNext(){
      if(tried>=candidates.length){ if(!succeeded) resolve('dead'); return; }
      const url = candidates[tried++];
      if(url.endsWith('.ico') || url.endsWith('.png')){
        const img = new Image();
        img.src = url+'?_cb='+Date.now();
        img.onload = ()=>{ succeeded=true; resolve('ok'); };
        img.onerror = ()=>{ tryNext(); };
      } else {
        fetch(url,{method:'GET', mode:'no-cors'})
        .then(r=>{
          const textCheck = r.url && (r.url.includes('godaddy.com') || r.url.includes('onlinenic.com'));
          if(textCheck) resolve('sale');
          else resolve('ok');
          succeeded=true;
        })
        .catch(()=> tryNext());
      }
    }

    tryNext();
    setTimeout(()=>{ if(!succeeded) resolve('dead'); },3500);
  });
}

async function render(list){
  grid.innerHTML='';
  for(let idx=0; idx<list.length; idx++){
    const {element,statusEl} = createCard(list[idx], idx);
    grid.appendChild(element);
    const result = await checkAvailabilityAsync(list[idx]);
    if(result==='ok'){ statusEl.className='status ok'; statusEl.textContent='OK'; }
    else if(result==='sale'){ statusEl.className='status sale'; statusEl.textContent='On Sale'; }
    else{ statusEl.className='status dead'; statusEl.textContent='Unavailable'; }
  }
}

// initial generation
if(!currentSet.length) currentSet = generateSet(30);
render(currentSet);

// controls
clearBtn.addEventListener('click', async () => {
  const statusEls = document.querySelectorAll('.status');
  
  for (let idx = 0; idx < statusEls.length; idx++) {
    const el = statusEls[idx];
    if(el.classList.contains('dead') || el.classList.contains('sale')){
      let valid=false;
      while(!valid){
        const newDomain = makeDomain();
        currentSet[idx] = newDomain;
        const result = await checkAvailabilityAsync(newDomain);
        if(result==='ok'){
          valid=true;
          el.className='status ok';
          el.textContent='OK';
          const cardLink = el.closest('.card-link');
          cardLink.href='https://'+newDomain;
          cardLink.querySelector('.domain').textContent=newDomain;
          cardLink.querySelector('.banner').textContent=newDomain.split('.')[0].toUpperCase();
        }
      }
    }
  }
});

regenBtn.addEventListener('click', ()=>{ currentSet = generateSet(30); render(currentSet); });

recheckBtn.addEventListener('click', async ()=>{
  const statusEls = document.querySelectorAll('.status');
  for(let idx=0; idx<statusEls.length; idx++){
    const el=statusEls[idx];
    el.className='status'; el.textContent='Re-checking...';
    const result = await checkAvailabilityAsync(currentSet[idx]);
    if(result==='ok'){ el.className='status ok'; el.textContent='OK'; }
    else if(result==='sale'){ el.className='status sale'; el.textContent='On Sale'; }
    else{ el.className='status dead'; el.textContent='Unavailable'; }
  }
});

// keyboard shortcut R
window.addEventListener('keydown', (e)=>{
  if(e.key.toLowerCase()==='r' && !e.metaKey && !e.ctrlKey){
    e.preventDefault();
    currentSet = generateSet(30);
    render(currentSet);
  }
});
</script>
</body>
</html>
